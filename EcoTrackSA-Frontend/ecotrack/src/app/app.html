<div class="container my-4">
  <h1 class="mb-4">EcoTrack - Monitoreo de Vehículos</h1>

  <!-- Formulario de ingreso -->
  <div class="card mb-4">
    <div class="card-header bg-primary text-white">Agregar/Editar Vehículo</div>
    <div class="card-body">
      <form [formGroup]="vehiculoForm" (ngSubmit)="onSubmit()">
        <div class="row mb-3">
          <div class="col">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" id="nombre" class="form-control" formControlName="nombre" />
            <div *ngIf="vehiculoForm.get('nombre').touched && vehiculoForm.get('nombre').invalid" class="text-danger small">
              El nombre es obligatorio.
            </div>
          </div>
          <div class="col">
            <label for="marca" class="form-label">Marca</label>
            <input type="text" id="marca" class="form-control" formControlName="marca" />
            <div *ngIf="vehiculoForm.get('marca').touched && vehiculoForm.get('marca').invalid" class="text-danger small">
              La marca debe tener al menos 3 caracteres.
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col">
            <label for="anio" class="form-label">Año</label>
            <input type="number" id="anio" class="form-control" formControlName="anio" />
            <div *ngIf="vehiculoForm.get('anio').touched && vehiculoForm.get('anio').invalid" class="text-danger small">
              El año debe estar entre 2015 y 2025.
            </div>
          </div>
          <div class="col">
            <label for="estado" class="form-label">Estado</label>
            <select id="estado" class="form-select" formControlName="estado">
              <option value="">Seleccione</option>
              <option value="activo">Activo</option>
              <option value="inactivo">Inactivo</option>
            </select>
            <div *ngIf="vehiculoForm.get('estado').touched && vehiculoForm.get('estado').invalid" class="text-danger small">
              Debe seleccionar un estado válido.
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-success" [disabled]="vehiculoForm.invalid">
          {{ editarModo ? 'Actualizar' : 'Agregar' }}
        </button>
      </form>
    </div>
  </div>

  <!-- Tabla de vehículos -->
  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead class="table-dark">
        <tr>
          <th>Nombre</th>
          <th>Marca</th>
          <th>Año</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vehiculo of vehiculos">
          <td>{{ vehiculo.nombre }}</td>
          <td>{{ vehiculo.marca }}</td>
          <td>{{ vehiculo.anio }}</td>
          <td>{{ vehiculo.estado }}</td>
          <td>
            <button class="btn btn-primary btn-sm me-2" (click)="editarVehiculo(vehiculo)">Editar</button>
            <button class="btn btn-danger btn-sm" (click)="eliminarVehiculo(vehiculo.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Indicador de carga -->
  <div *ngIf="loading" class="alert alert-info mt-3">Cargando datos...</div>
</div>
